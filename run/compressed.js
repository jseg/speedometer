!function(){function e(){var e="ClockPanel",n=u("00"),a=t(e+"-hour");a.appendChild(n);var d=u("00"),i=t(e+"-minute");i.appendChild(d);var l=u("00"),o=t(e+"-second");o.appendChild(u(":")),o.appendChild(l);var r=t(e+" BottomPanel-content");r.appendChild(a),r.appendChild(u(":")),r.appendChild(i),r.appendChild(o);var p=t(e+"-label");p.appendChild(u("CLOCK"));var c=t("BottomPanel");return c.appendChild(p),c.appendChild(r),{element:c,update:function(){var e=new Date;n.nodeValue=C(e.getHours()),d.nodeValue=C(e.getMinutes()),l.nodeValue=C(e.getSeconds())}}}function n(e){var n=t("Tab ClockTab Button");n.appendChild(u("CLOCK"));var a=n.classList,i=d(n,function(){e(),a.add("selected")});return i.enable(),{element:n,deselect:function(){a.remove("selected")}}}function t(e){var n=document.createElement("div");return n.className=e,n}function a(){function n(){d(function(){setTimeout(function(){T.update(),m.update(),b.update(),n()},50)})}function a(e){h&&f.add(e),C.setSpeed(e.coords.speed)}var d=window.requestAnimationFrame,u=window.cancelAnimationFrame;d||(d=window.mozRequestAnimationFrame,u=window.mozCancelAnimationFrame);var h=!1,f=i(),C=o(),v=p(function(){M.removeChild(M.firstChild),M.appendChild(m.element)},function(){M.removeChild(M.firstChild),M.appendChild(T.element)},function(){M.removeChild(M.firstChild),M.appendChild(b.element)}),m=s(),T=c(f),b=e(),g="MainPanel",M=t(g+"-panel");M.appendChild(T.element);var P=l(function(){m.reset(),T.reset(),f.reset()}),w=r(function(){h=!0,m.start()},function(){h=!1,m.stop()}),E=t(g+"-content");E.appendChild(C.element),E.appendChild(M),E.appendChild(v.element),E.appendChild(P),E.appendChild(w.element);var B=t(g);return B.appendChild(E),navigator.geolocation.watchPosition(a,function(e){console.log("error",e)},{enableHighAccuracy:!0}),n(),{element:B,resize:function(e,n){var t=e/320;370*t>n&&(t=n/370),B.style.transform="scale("+t+")"}}}function d(e,n){function t(){l.add("active"),clearTimeout(i),i=setTimeout(function(){n(),i=setTimeout(function(){l.remove("active")},150)},100)}function a(e){0===e.button&&(e.preventDefault(),o?o=!1:t())}function d(e){e.preventDefault(),o=!0,t()}var i,l=e.classList,o=!1;return{disable:function(){e.removeEventListener("touchstart",d),e.removeEventListener("mousedown",a)},enable:function(){e.addEventListener("mousedown",a),e.addEventListener("touchstart",d)}}}function i(){var e=[],n=0;return{add:function(t){e.push(t),n+=32435},distance:function(){return n},reset:function(){e.splice(0)}}}function l(e){var n=t("ResetButton Button");n.appendChild(u("RESET"));var a=d(n,e);return a.enable(),n}function o(){var e="SpeedLabel",n=u("00"),a=t(e+"-grey");a.appendChild(n);var d=u("-"),i=t(e+"-integerPart");i.appendChild(d);var l=u("-"),o=t(e+"-fractionalPart");o.appendChild(u(".")),o.appendChild(l);var r=t(e+"-unit");r.appendChild(u("KM/H"));var p=t(e+"-label");p.appendChild(u("SPEED"));var c=t(e+"-content");c.appendChild(a),c.appendChild(i),c.appendChild(o),c.appendChild(r);var h=t(e);return h.appendChild(p),h.appendChild(c),{element:h,setSpeed:function(e){var t,a,i;if(isFinite(e)){e=18*e/5,e=Math.min(999.99,e),t=String(Math.floor(e)),a=Math.floor(e%1*10);var o=t.length;i=3==o?"":2==o?"0":"00"}else t="-",a="-",i="--";d.nodeValue=t,l.nodeValue=a,n.nodeValue=i}}}function r(e,n){var a=!1,i=u("START"),l=t("StartStopButton Button");l.appendChild(i);var o=d(l,function(){a?(a=!1,i.nodeValue="START",n()):(a=!0,i.nodeValue="STOP",e())});return o.enable(),{element:l}}function p(e,a,d){var i=h(function(){l.deselect(),o.deselect(),a()}),l=f(function(){i.deselect(),o.deselect(),e()}),o=n(function(){i.deselect(),l.deselect(),d()}),r=t("Tabs");return r.appendChild(i.element),r.appendChild(l.element),r.appendChild(o.element),{element:r}}function u(e){return document.createTextNode(e)}function c(e){function n(){var n=e.distance();n=Math.min(999999,n);var t=String(n%1e3);1==t.length?t="00"+t:2==t.length&&(t="0"+t),r.nodeValue=t,l.nodeValue=Math.floor(n/1e3);var a,i=l.nodeValue.length;a=3==i?"":2==i?"0":"00",d.nodeValue=a}var a="TripDistancePanel",d=u("00"),i=t(a+"-grey");i.appendChild(d);var l=u("0"),o=t(a+"-integerPart");o.appendChild(i),o.appendChild(l);var r=u("000"),p=t(a+"-fractionalPart");p.appendChild(u(".")),p.appendChild(r);var c=t(a+"-unit");c.appendChild(u("KM"));var h=t(a+" BottomPanel-content");h.appendChild(o),h.appendChild(p),h.appendChild(c);var s=t(a+"-label");s.appendChild(u("TRIP DISTANCE"));var f=t("BottomPanel");return f.appendChild(s),f.appendChild(h),{element:f,reset:n,update:n}}function h(e){var n="TripDistanceTab",a=t(n+"-content Tab-content");a.appendChild(u("TRIP")),a.appendChild(document.createElement("br")),a.appendChild(u("DISTANCE"));var i=t(n+" Tab Button");i.appendChild(t(n+"-aligner Tab-aligner")),i.appendChild(a);var l=i.classList;l.add("selected");var o=d(i,function(){e(),l.add("selected")});return o.enable(),{element:i,deselect:function(){l.remove("selected")}}}function s(){var e="TripTimePanel",n=u("00"),a=t(e+"-hour");a.appendChild(n);var d=u("00"),i=t(e+"-minute");i.appendChild(d);var l=u("00"),o=t(e+"-second");o.appendChild(u(":")),o.appendChild(l);var r=t(e+" BottomPanel-content");r.appendChild(a),r.appendChild(u(":")),r.appendChild(i),r.appendChild(o);var p=t(e+"-label");p.appendChild(u("TRIP TIME"));var c=t("BottomPanel");c.appendChild(p),c.appendChild(r);var h=0,s=null,f=359999e3;return{element:c,reset:function(){h=0,null!==s&&(s=Date.now())},start:function(){s=Date.now()},stop:function(){h+=Date.now()-s,h=Math.min(h,f),s=null},update:function(){if(null!==s){var e=Date.now();h+=e-s,s=e}h=Math.min(h,f);var t=h/1e3;l.nodeValue=C(Math.floor(t%60));var a=t/60;d.nodeValue=C(Math.floor(a%60));var i=a/60;n.nodeValue=C(Math.floor(i))}}}function f(e){var n="TripTimeTab",a=t(n+"-content Tab-content");a.appendChild(u("TRIP")),a.appendChild(document.createElement("br")),a.appendChild(u("TIME"));var i=t(n+" Tab Button");i.appendChild(t(n+"-aligner Tab-aligner")),i.appendChild(a);var l=i.classList,o=d(i,function(){e(),l.add("selected")});return o.enable(),{element:i,deselect:function(){l.remove("selected")}}}function C(e){return e=String(e),1==e.length&&(e="0"+e),e}!function(){function e(){n.resize(innerWidth,innerHeight)}!function(){var e=document.createElement("style");e.innerHTML='@font-face {font-family: FreeMono;src: url(fonts/FreeMono.ttf);src: local("FreeMono"), url(fonts/FreeMono.ttf);font-weight: normal;}@font-face {font-family: FreeMono;src: url(fonts/FreeMonoBold.ttf);src: local("FreeMono Bold"), url(fonts/FreeMonoBold.ttf);font-weight: bold;}',document.head.appendChild(e)}();var n=a();document.body.appendChild(n.element),addEventListener("resize",e),e()}()}();