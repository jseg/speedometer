!function(){function e(e,n,i){function a(){var t,n;if(null===P)n="···",t="·";else{var i=s(P,e);n=i.fractionalPart,t=i.integerPart}o.nodeValue=t,d.nodeValue=n}var l="AltitudePanel",o=x("0"),r=u(l+"-integerPart");r.appendChild(o);var d=x("000"),h=u(l+"-fractionalPart");h.appendChild(x(".")),h.appendChild(d);var c=x(e.distanceLabel),p=u(l+"-unit");p.appendChild(c);var f=p.classList,m=u("BottomPanel-label");m.appendChild(x("ALTITUDE"));var v=m.classList,g=t(e,n,i),T=u("BottomPanel");T.appendChild(m),T.appendChild(r),T.appendChild(h),T.appendChild(p),T.appendChild(g.element);var C,L=T.classList,P=null,M=[],b="highlight";return{element:T,reset:g.reset,start:g.start,stop:g.stop,highlight:function(){L.add(b),v.add(b),clearTimeout(C),C=setTimeout(function(){L.remove(b),v.remove(b)},200)},setAltitude:function(e){if("number"==typeof e&&isFinite(e)){M.push(e),M.length>3&&M.shift();var t=0;M.forEach(function(e){t+=e}),t/=M.length,P=t}else P=null,M.splice(0);g.setAltitude(P),a()},setDarkTheme:function(){n(L),n(v),n(f),g.setDarkTheme()},setLightTheme:function(){i(L),i(v),i(f),g.setLightTheme()},setUnit:function(t){e=t,c.nodeValue=e.distanceLabel,a(),g.setUnit(e)}}}function t(e,t,n){function i(t,n){var i=s(n,e);t.setValue(i.integerPart,i.fractionalPart)}function a(){null!==c&&(null===p?p=f=c:(p=Math.min(p,c),f=Math.max(f,c)),i(o,p),i(r,f))}var l="AltitudeStatPanel",o=B("MIN",t,n),r=B("MAX",t,n),d=u(l);d.appendChild(o.element),d.appendChild(r.element);var h=!1,c=null,p=null,f=null;return{element:d,reset:function(){p=f=null,o.reset(),r.reset(),h&&a()},setAltitude:function(e){c=e,h&&a()},setDarkTheme:function(){o.setDarkTheme(),r.setDarkTheme()},setLightTheme:function(){o.setLightTheme(),r.setLightTheme()},setUnit:function(t){e=t,h&&a()},start:function(){h=!0,a()},stop:function(){h=!1}}}function n(e,t,n){return L("ALTITUDE","AltitudeTab",e,t,n)}function i(e){var t={latitude:0,longitude:0};return e.forEach(function(e){t.latitude+=e.coords.latitude,t.longitude+=e.coords.longitude}),t.latitude/=e.length,t.longitude/=e.length,{coords:t}}function a(e,t,n,i,a){function l(){var i,a=t.getTripTime();i=0==a?0:e.get()/(a/1e3),i=n.fix(18*i/5),i=Math.min(999.99,i),r.nodeValue=Math.floor(i),h.nodeValue=Math.floor(i%1*10)}var o="SpeedPanel",r=x("0"),d=u(o+"-integerPart");d.appendChild(r);var h=x("0"),s=u(o+"-fractionalPart");s.appendChild(x(".")),s.appendChild(h);var c=x(n.speedLabel),p=u(o+"-unit");p.appendChild(c);var f=p.classList,m=u("BottomPanel-label");m.appendChild(x("AVERAGE SPEED"));var v=m.classList,g=u("BottomPanel");g.appendChild(m),g.appendChild(d),g.appendChild(s),g.appendChild(p);var T,C=g.classList,L="highlight";return{element:g,reset:l,update:l,highlight:function(){C.add(L),v.add(L),clearTimeout(T),T=setTimeout(function(){C.remove(L),v.remove(L)},200)},setDarkTheme:function(){i(C),i(v),i(f)},setLightTheme:function(){a(C),a(v),a(f)},setUnit:function(e){n=e,c.nodeValue=n.speedLabel,l()}}}function l(e,t,n){return F("AVERAGE","SPEED","AverageSpeedTab",e,t,n)}function o(e,t){var n="ClockPanel",i=x("00"),a=x("00"),l=x("00"),o=u(n+"-second");o.appendChild(x(":")),o.appendChild(l);var r=u(n+"-content BottomPanel-content");r.appendChild(i),r.appendChild(x(":")),r.appendChild(a),r.appendChild(o);var d=u("BottomPanel-label");d.appendChild(x("CLOCK"));var h=d.classList,s=u(n+" BottomPanel");s.appendChild(d),s.appendChild(r);var c,p=s.classList,f="highlight";return{element:s,highlight:function(){p.add(f),h.add(f),clearTimeout(c),c=setTimeout(function(){p.remove(f),h.remove(f)},200)},setDarkTheme:function(){e(p),e(h)},setLightTheme:function(){t(p),t(h)},update:function(){var e=new Date;i.nodeValue=H(e.getHours()),a.nodeValue=H(e.getMinutes()),l.nodeValue=H(e.getSeconds())}}}function r(e,t,n){return L("CLOCK","ClockTab",e,t,n)}function d(){function e(){var e;if(e=null===u?0:u*Math.PI/180,h.clearRect(0,0,r,r),h.save(),h.translate(d,d),h.rotate(-e),null!==u){var o=.01*r;h.save(),h.lineWidth=o,h.beginPath(),h.moveTo(0,0),h.rotate(-Math.PI/2),h.arc(0,0,d-o,0,e),h.closePath(),h.fillStyle=l,h.fill(),h.lineJoin="round",h.strokeStyle=a,h.stroke(),h.restore()}h.save();for(var s=0;60>s;s++){if(h.beginPath(),s%5||null===u){var o=.01*r;h.lineWidth=o,h.moveTo(0,.98*d),h.lineTo(0,.95*d),h.strokeStyle=i}else h.lineWidth=.03*r,h.moveTo(0,.98*d),h.lineTo(0,.92*d),h.strokeStyle=n;h.stroke(),h.rotate(Math.PI/30)}if(h.restore(),null!==u){var c=.92*-d;h.save(),h.font="bold "+.25*r+"px FreeMono, monospace",h.textAlign="center",h.textBaseline="top",h.fillStyle="#f00",h.fillText("N",0,c),h.fillStyle=t,h.rotate(Math.PI/2),h.fillText("E",0,c),h.rotate(Math.PI/2),h.fillText("S",0,c),h.rotate(Math.PI/2),h.fillText("W",0,c),h.restore()}h.restore()}var t,n,i,a,l,o=document.createElement("canvas");o.className="CompassPanel";var r,d,h=o.getContext("2d"),u=null;return{element:o,resize:function(t){r=116*t*devicePixelRatio,d=r/2,o.width=o.height=r,e()},setDarkTheme:function(){a="#999",l="#444",t="#999",n="#fff",i="#999",e()},setHeading:function(t){u=t,e()},setLightTheme:function(){a="#666",l="#bbb",t="#666",n="#000",i="#666",e()}}}function h(e,t){function n(e){return e*Math.PI/180}var i=e.coords,a=t.coords,l=n(i.latitude),o=n(i.longitude),r=n(a.latitude),d=n(a.longitude),h=6371e3,u=r-l,s=d-o,c=Math.sin(u/2),p=Math.sin(s/2),f=c*c+Math.cos(l)*Math.cos(r)*p*p,m=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),v=h*m;return v}function u(e){var t=document.createElement("div");return t.className=e,t}function s(e,t){var n=Math.floor(t.fix(e));n=Math.min(999999,Math.max(-99999,n));var i=String(Math.abs(n)%1e3);return 1==i.length?i="00"+i:2==i.length&&(i="0"+i),integerPart=Math.floor(Math.abs(n)/1e3),0>n&&(integerPart="-"+integerPart),{fractionalPart:i,integerPart:integerPart}}function c(e,t){function n(){var e;e=null===g?"·":Math.round(g),o.nodeValue=e}var i="HeadingPanel",a=u(i+"-unit");a.appendChild(x("°"));var l=a.classList,o=x("·"),r=u(i+"-value");r.appendChild(o),r.appendChild(a);var h=u("BottomPanel-label");h.appendChild(x("HEADING"));var s=h.classList,c=d(),p=u("BottomPanel");p.appendChild(h),p.appendChild(r),p.appendChild(c.element);var f,m=p.classList,v="highlight",g=null,T=null,C=[];return{element:p,resize:c.resize,highlight:function(){m.add(v),s.add(v),clearTimeout(f),f=setTimeout(function(){m.remove(v),s.remove(v)},200)},setDarkTheme:function(){e(m),e(s),e(l),c.setDarkTheme()},setHeading:function(e){if("number"==typeof e&&isFinite(e)){null!=T&&(e-T>180?e-=360:-180>e-T&&(e+=360)),T=e,C.push(e),C.length>3&&C.shift();var t=0;C.forEach(function(e){t+=e}),t/=C.length,g=(t%360+360)%360}else g=null,T=null,C.splice(0);c.setHeading(g),n()},setLightTheme:function(){t(m),t(s),t(l),c.setLightTheme()}}}function p(e,t,n){return L("HEADING","HeadingTab",e,t,n)}function f(){return{key:"imperial",distanceLabel:"MI",speedLabel:"MI/H",fix:function(e){return e/1.609344}}}function m(){function t(){F.setDarkTheme(),H.setDarkTheme(),G.setDarkTheme(),O.setDarkTheme(),j.setDarkTheme(),w.setDarkTheme(),K.setDarkTheme(),W.setDarkTheme(),z.setDarkTheme(),X.setDarkTheme(),U.setDarkTheme(),Y.setDarkTheme(),Q.setDarkTheme(),et.remove("lightTheme"),et.add("darkTheme"),q.theme="dark",q.save()}function n(e){e.remove(L),e.add(C)}function i(){p(B)}function l(){F.setLightTheme(),H.setLightTheme(),G.setLightTheme(),O.setLightTheme(),j.setLightTheme(),w.setLightTheme(),K.setLightTheme(),W.setLightTheme(),z.setLightTheme(),X.setLightTheme(),U.setLightTheme(),Y.setLightTheme(),Q.setLightTheme(),et.add("lightTheme"),et.add("darkTheme"),q.theme="light",q.save()}function r(e){e.remove(C),e.add(L)}function d(){p(x)}function h(e){J.removeChild(J.firstChild),J.appendChild(e.element),e.highlight()}function s(e){w.setSpeed(e),M&&K.setSpeed(e)}function p(e){w.setUnit(e),F.setUnit(e),K.setUnit(e),W.setUnit(e),G.setUnit(e),q.unit=e.key,q.save()}function m(){var e=Date.now();P(function(){H.update(),z.update(),W.update(),setTimeout(m,Math.max(0,e+1e3-Date.now()))})}function g(e){M&&(S.add(e),F.update());var t=e.coords;s(t.speed);var n=t.accuracy;j.setStatus(8>n?"SIGNAL GOOD":16>n?"SIGNAL OK":"SIGNAL WEAK"),tt(t.altitude),nt(t.heading),j.hideError()}var C="darkTheme",L="lightTheme",P=window.requestAnimationFrame;P||(P=window.mozRequestAnimationFrame);var M=!1,S=y(),B=f(),x=T(),w=k(x,n,r),U=V(function(){h(H)},function(){h(F)},function(){h(z)},function(){h(K)},function(){h(W)},function(){h(X)},function(){h(G)},function(){h(O)},n,r),H=R(n,r),F=N(S,x,n,r),G=e(x,n,r),O=c(n,r),z=o(n,r),K=v(x,n,r),W=a(S,H,x,n,r),q=D(),X=E(q,t,l,i,d,n,r),_="MainPanel",J=u(_+"-panel");J.appendChild(F.element);var Q=b(function(){S.reset(),F.update(),H.reset(),K.reset(),W.reset(),G.reset()},n,r),Y=I(function(){M=!0,H.start(),S.start(),G.start()},function(){M=!1,H.stop(),G.stop()},n,r),j=A(n,r),Z=u(_+"-content");Z.appendChild(w.element),Z.appendChild(J),Z.appendChild(j.element),Z.appendChild(U.element),Z.appendChild(Q.element),Z.appendChild(Y.element);var $=u(_);$.appendChild(Z);var et=document.body.classList,tt=G.setAltitude,nt=O.setHeading;return"light"==q.theme?l():t(),"imperial"==q.unit?i():d(),window.setHeading=nt,navigator.geolocation.watchPosition(g,function(e){var t=e.code;j.setStatus(t==e.PERMISSION_DENIED?"PERMISSION DENIED":t==e.POSITION_UNAVAILABLE?"POSITION UNAVAILABLE":"TIMEOUT, RETRYING"),s(null),tt(null),nt(null),j.showError()},{enableHighAccuracy:!0,maximumAge:3e4,timeout:3e4}),m(),{element:$,resize:function(e,t){var n=320,i=480;if(e>t){var a=n;n=i,i=a}Z.style.width=n+"px",Z.style.height=i+"px",Z.style.top=-i/2+"px",Z.style.left=-n/2+"px";var l=e/n;l*i>t&&(l=t/i),$.style.transform="scale("+l+")",O.resize(l)}}}function v(e,t,n){function i(e){C=e,a()}function a(){var t=e.fix(18*C/5);t=Math.min(999.99,t),o.nodeValue=Math.floor(t),d.nodeValue=Math.floor(t%1*10)}var l="SpeedPanel",o=x("0"),r=u(l+"-integerPart");r.appendChild(o);var d=x("0"),h=u(l+"-fractionalPart");h.appendChild(x(".")),h.appendChild(d);var s=x(e.speedLabel),c=u(l+"-unit");c.appendChild(s);var p=c.classList,f=u("BottomPanel-label");f.appendChild(x("MAX SPEED"));var m=f.classList,v=u("BottomPanel");v.appendChild(f),v.appendChild(r),v.appendChild(h),v.appendChild(c);var g,T=v.classList,C=0,L="highlight";return{element:v,highlight:function(){T.add(L),m.add(L),clearTimeout(g),g=setTimeout(function(){T.remove(L),m.remove(L)},200)},reset:function(){i(0)},setDarkTheme:function(){t(T),t(m),t(p)},setLightTheme:function(){n(T),n(m),n(p)},setSpeed:function(e){isFinite(e)||(e=0),e>C&&i(e)},setUnit:function(t){e=t,s.nodeValue=e.speedLabel,a()}}}function g(e,t,n){return F("MAX","SPEED","MaxSpeedTab",e,t,n)}function T(){return{key:"metric",distanceLabel:"KM",speedLabel:"KM/H",fix:function(e){return e}}}function C(e,t){function n(){a.add("active"),clearTimeout(i),i=setTimeout(function(){t(),i=setTimeout(function(){a.remove("active")},150)},100)}var i,a=e.classList,l=!1;e.addEventListener("mousedown",function(e){0===e.button&&(e.preventDefault(),l?l=!1:n())}),e.addEventListener("touchstart",function(e){e.preventDefault(),l=!0,n()})}function L(e,t,n,i,a){var l=u("Tab-highlight");l.appendChild(x(e));var o=l.classList,r=u("Button-content");r.appendChild(l),C(r,n);var d=r.classList,h=u(t+" OneLineTab Tab Button");h.appendChild(r);var s,c=h.classList,p=!1,f="selected",m="highlight";return{element:h,deselect:function(){p=!1,d.remove(f),o.remove(f)},highlight:function(){o.add(m),clearTimeout(s),s=setTimeout(function(){o.remove(m)},200)},select:function(){p=!0,d.add(f),o.add(f)},setDarkTheme:function(){i(c),i(d),i(o)},setLightTheme:function(){a(c),a(d),a(o)}}}function P(e,t,n){return L("PAGE 1","Page1Tab",e,t,n)}function M(e,t,n){return L("PAGE 2","Page2Tab",e,t,n)}function b(e,t,n){var i=u("Button-content");i.appendChild(x("RESET")),C(i,e);var a=i.classList,l=u("ResetButton Button");l.appendChild(i);var o=l.classList;return{element:l,setDarkTheme:function(){t(o),t(a)},setLightTheme:function(){n(o),t(a)}}}function D(){var e,t;try{e=localStorage.theme,t=localStorage.unit}catch(n){}var i={theme:e,unit:t,save:function(){try{localStorage.theme=i.theme,localStorage.unit=i.unit}catch(e){}}};return i}function E(e,t,n,i,a,l,o){var r="SettingsPanel",d="selected",h=u("Button-content");h.appendChild(x("LIGHT")),C(h,function(){m.remove(d),s.add(d),n()});var s=h.classList,c=u(r+"-lightButton "+r+"-button Button");c.appendChild(h);var p=c.classList,f=u("Button-content");f.appendChild(x("DARK")),C(f,function(){s.remove(d),m.add(d),t()});var m=f.classList,v=u(r+"-darkButton "+r+"-button Button");v.appendChild(f);var g=v.classList,T=u("Button-content");T.appendChild(x("IMPERIAL")),C(T,function(){D.remove(d),L.add(d),i()});var L=T.classList,P=u(r+"-imperialButton "+r+"-button Button");P.appendChild(T);var M=P.classList,b=u("Button-content");b.appendChild(x("METRIC")),C(b,function(){L.remove(d),D.add(d),a()});var D=b.classList,E=u(r+"-metricButton "+r+"-button Button");E.appendChild(b);var S=E.classList;"imperial"==e.unit?L.add(d):D.add(d),"light"==e.theme?s.add(d):m.add(d);var k=u(r+"-fieldLabel units");k.appendChild(x("UNITS:"));var I=u(r+"-fieldLabel theme");I.appendChild(x("THEME:"));var B=u("BottomPanel-label");B.appendChild(x("SETTINGS"));var A=B.classList,V=u("BottomPanel");V.appendChild(B),V.appendChild(I),V.appendChild(c),V.appendChild(v),V.appendChild(k),V.appendChild(P),V.appendChild(E);var y,N=V.classList,w="highlight";return{element:V,highlight:function(){N.add(w),A.add(w),clearTimeout(y),y=setTimeout(function(){N.remove(w),A.remove(w)},200)},setDarkTheme:function(){l(N),l(A),l(p),l(s),l(g),l(m),l(M),l(L),l(S),l(D)},setLightTheme:function(){o(N),o(A),o(p),o(s),o(g),o(m),o(M),o(L),o(S),o(D)}}}function S(e,t,n){return L("SETTINGS","SettingsTab",e,t,n)}function k(e,t,n){function i(){var t,n,i;if(null===P)i="",t="·",n="·";else{var a=e.fix(18*P/5);a=Math.min(999.99,a),t=Math.floor(a),n=Math.floor(a%1*10),i=D?b?"":"↑":b?"↓":""}l.nodeValue=t,r.nodeValue=n,m.nodeValue=i}var a="SpeedLabel",l=x("·"),o=u(a+"-integerPart");o.appendChild(l);var r=x("·"),d=u(a+"-fractionalPart");d.appendChild(x(".")),d.appendChild(r);var h=x(e.speedLabel),s=u(a+"-unit");s.appendChild(h);var c=s.classList,p=u(a+"-label");p.appendChild(x("SPEED"));var f=p.classList,m=x("↕"),v=u(a+"-arrow");v.appendChild(m);var g=u(a);g.appendChild(p),g.appendChild(v),g.appendChild(o),g.appendChild(d),g.appendChild(s);var T,C,L=g.classList,P=null,M=null,b=!1,D=!1,E=.02,S=[];return{element:g,setDarkTheme:function(){t(L),t(f),t(c)},setLightTheme:function(){n(L),n(f),n(c)},setSpeed:function(e){if("number"==typeof e&&isFinite(e)){S.push(e),S.length>3&&S.shift();var t=0;S.forEach(function(e){t+=e}),t/=S.length,null!==M&&(t>M+E?(D=!0,clearTimeout(C),C=setTimeout(function(){D=!1,i()},2500)):M-E>t&&(b=!0,clearTimeout(T),T=setTimeout(function(){b=!1,i()},2500))),M=P,P=t}else P=null,M=null,S.splice(0),b=D=!1,clearTimeout(T),clearTimeout(C);i()},setUnit:function(t){e=t,h.nodeValue=e.speedLabel,i()}}}function I(e,t,n,i){var a=!1,l=x("START"),o=u("Button-content");o.appendChild(l),C(o,function(){a?(a=!1,l.nodeValue="START",t()):(a=!0,l.nodeValue="STOP",e())});var r=o.classList,d=u("StartStopButton Button");d.appendChild(o);var h=d.classList;return{element:d,setDarkTheme:function(){n(h),n(r)},setLightTheme:function(){i(h),i(r)}}}function B(e,t,n){var i="StatField",a=u(i+"-label");a.appendChild(x(e));var l=a.classList,o=x("·"),r=u(i+"-integerPart");r.appendChild(o);var d=x("·"),h=u(i+"-fractionalPart");h.appendChild(x(".")),h.appendChild(d);var s=u(i+"-value");s.appendChild(r),s.appendChild(h);var c=u(i);return c.appendChild(a),c.appendChild(s),{element:c,reset:function(){o.nodeValue=d.nodeValue="·"},setDarkTheme:function(){t(l)},setLightTheme:function(){n(l)},setValue:function(e,t){o.nodeValue=e,d.nodeValue=t}}}function A(e,t){function n(){h.add(p),clearTimeout(d),d=setTimeout(function(){h.remove(p)},200)}var i="StatusPanel",a=x("ACQUIRING"),l=u(i+"-value");l.appendChild(a);var o=l.classList,r=u(i);r.appendChild(x("GPS")),r.appendChild(l);var d,h=r.classList,s=!1,c="error",p="highlight";return{element:r,hideError:function(){s&&(s=!1,o.remove(c),n())},setDarkTheme:function(){e(h),e(o)},setLightTheme:function(){t(h),t(o)},setStatus:function(e){a.nodeValue=e},showError:function(){s||(s=!0,o.add(c),n())}}}function V(e,t,i,a,o,d,h,s,c,f){function m(e){V.forEach(function(t){e!=t&&t.deselect()}),e.select()}var v=1,T=w(function(){m(T),t()},c,f),C=U(function(){m(C),e()},c,f),L=g(function(){m(L),a()},c,f),b=l(function(){m(b),o()},c,f),D=n(function(){m(D),h()},c,f),E=p(function(){m(E),s()},c,f),k=r(function(){m(k),i()},c,f),I=S(function(){m(I),d()},c,f),B=P(function(){1!=v&&(v=1,A.deselect(),y.removeChild(D.element),y.removeChild(E.element),y.removeChild(I.element),y.removeChild(k.element),y.appendChild(T.element),y.appendChild(C.element),y.appendChild(L.element),y.appendChild(b.element)),T.highlight(),C.highlight(),L.highlight(),b.highlight()},c,f),A=M(function(){2!=v&&(v=2,B.deselect(),y.removeChild(T.element),y.removeChild(C.element),y.removeChild(L.element),y.removeChild(b.element),y.appendChild(D.element),y.appendChild(E.element),y.appendChild(I.element),y.appendChild(k.element)),D.highlight(),E.highlight(),I.highlight(),k.highlight()},c,f),V=[T,C,L,b,D,E,k,I],x="Tabs",y=u(x);return y.appendChild(T.element),y.appendChild(C.element),y.appendChild(L.element),y.appendChild(b.element),y.appendChild(B.element),y.appendChild(A.element),{element:y,setDarkTheme:function(){V.forEach(function(e){e.setDarkTheme()}),B.setDarkTheme(),A.setDarkTheme()},setLightTheme:function(){V.forEach(function(e){e.setLightTheme()}),B.setLightTheme(),A.setLightTheme()}}}function x(e){return document.createTextNode(e)}function y(){var e=0,t=[];return{add:function(n){var a;if(t.length&&(a=i(t)),t.push(n),t.length>3&&t.shift(),a){var l=i(t);e+=h(a,l)}},get:function(){return e},reset:function(){t.splice(0),e=0},start:function(){t.splice(0)}}}function N(e,t,n,i){function a(){var n=t.fix(e.get());n=Math.min(999999,Math.floor(n));var i=String(n%1e3);1==i.length?i="00"+i:2==i.length&&(i="0"+i),d.nodeValue=i,o.nodeValue=Math.floor(n/1e3)}var l="TripDistancePanel",o=x("0"),r=u(l+"-integerPart");r.appendChild(o);var d=x("000"),h=u(l+"-fractionalPart");h.appendChild(x(".")),h.appendChild(d);var s=x(t.distanceLabel),c=u(l+"-unit");c.appendChild(s);var p=c.classList,f=u("BottomPanel-label");f.appendChild(x("TRIP DISTANCE"));var m=f.classList,v=u("BottomPanel");v.appendChild(f),v.appendChild(r),v.appendChild(h),v.appendChild(c);var g,T=v.classList,C="highlight";return{element:v,update:a,highlight:function(){T.add(C),m.add(C),clearTimeout(g),g=setTimeout(function(){T.remove(C),m.remove(C)},200)},setDarkTheme:function(){n(T),n(m),n(p)},setLightTheme:function(){i(T),i(m),i(p)},setUnit:function(e){t=e,s.nodeValue=t.distanceLabel,a()}}}function w(e,t,n){var i=F("TRIP","DISTANCE","TripDistanceTab",e,t,n);return i.select(),i}function R(e,t){var n="ClockPanel",i=x("00"),a=x("00"),l=x("00"),o=u(n+"-second");o.appendChild(x(":")),o.appendChild(l);var r=u("BottomPanel-label");r.appendChild(x("TRIP TIME"));var d=r.classList,h=u(n+"-content");h.appendChild(i),h.appendChild(x(":")),h.appendChild(a),h.appendChild(o);var s=u(n+" BottomPanel");s.appendChild(r),s.appendChild(h);var c,p=s.classList,f=0,m=null,v=359999e3,g="highlight";return{element:s,getTripTime:function(){return f},highlight:function(){p.add(g),d.add(g),clearTimeout(c),c=setTimeout(function(){p.remove(g),d.remove(g)},200)},reset:function(){f=0,null!==m&&(m=Date.now())},setDarkTheme:function(){e(p),e(d)},setLightTheme:function(){t(p),t(d)},start:function(){m=Date.now()},stop:function(){f+=Date.now()-m,f=Math.min(f,v),m=null},update:function(){if(null!==m){var e=Date.now();f+=e-m,m=e}f=Math.min(f,v);var t=f/1e3;l.nodeValue=H(Math.floor(t%60));var n=t/60;a.nodeValue=H(Math.floor(n%60));var o=n/60;i.nodeValue=H(Math.floor(o))}}}function U(e,t,n){return F("TRIP","TIME","TripTimeTab",e,t,n)}function H(e){return e=String(e),1==e.length&&(e="0"+e),e}function F(e,t,n,i,a,l){var o="TwoLineTab "+n,r=u(o+"-content Tab-content");r.appendChild(x(e)),r.appendChild(document.createElement("br")),r.appendChild(x(t));var d=u("Tab-highlight");d.appendChild(u(o+"-aligner Tab-aligner")),d.appendChild(r);var h=d.classList,s=u("Button-content");s.appendChild(d),C(s,i);var c=s.classList,p=u(o+" Tab Button");p.appendChild(s);var f,m=p.classList,v=!1,g="selected",T="highlight";return{element:p,deselect:function(){v=!1,c.remove(g),h.remove(g)},highlight:function(){h.add(T),clearTimeout(f),f=setTimeout(function(){h.remove(T)},200)},select:function(){v=!0,c.add(g),h.add(g)},setDarkTheme:function(){a(m),a(c),a(h)},setLightTheme:function(){l(m),l(c),l(h)}}}!function(){function e(){t.resize(innerWidth,innerHeight)}!function(){var e=document.createElement("style");e.innerHTML='@font-face {font-family: FreeMono;src: url(fonts/FreeMono.ttf);src: local("FreeMono"), url(fonts/FreeMono.ttf);font-weight: normal;}@font-face {font-family: FreeMono;src: url(fonts/FreeMonoBold.ttf);src: local("FreeMono Bold"), url(fonts/FreeMonoBold.ttf);font-weight: bold;}',document.head.appendChild(e)}();var t=m();document.body.appendChild(t.element),addEventListener("resize",e),e()}()}();