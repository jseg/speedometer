!function(){function e(e,n){function t(){var t,a=e.get(),l=n.getTripTime();t=0==l?0:a/(l/1e3),t=18*t/5,t=Math.min(999.99,t),i.nodeValue=String(Math.floor(t)),o.nodeValue=Math.floor(t%1*10)}var a="AverageSpeedPanel",i=g("0"),l=d(a+"-integerPart");l.appendChild(i);var o=g("0"),r=d(a+"-fractionalPart");r.appendChild(g(".")),r.appendChild(o);var h=d(a+"-unit");h.appendChild(g("KM/H"));var p=d(a+" BottomPanel-content");p.appendChild(l),p.appendChild(r),p.appendChild(h);var c=d(a+"-label");c.appendChild(g("AVERAGE SPEED"));var u=c.classList,s=d("BottomPanel");s.appendChild(c),s.appendChild(p);var f,m=s.classList;return{element:s,reset:t,update:t,highlight:function(){clearTimeout(f),m.add("highlight"),u.add("highlight"),f=setTimeout(function(){m.remove("highlight"),u.remove("highlight")},200)}}}function n(e){var n="AverageSpeedTab",t=d(n+"-content Tab-content");t.appendChild(g("AVERAGE")),t.appendChild(document.createElement("br")),t.appendChild(g("SPEED"));var a=d(n+" Tab Button");a.appendChild(d(n+"-aligner Tab-aligner")),a.appendChild(t);var i=a.classList,l=p(a,function(){e(),i.add("selected")});return l.enable(),{element:a,deselect:function(){i.remove("selected")}}}function t(){var e="ClockPanel",n=g("00"),t=d(e+"-hour");t.appendChild(n);var a=g("00"),i=d(e+"-minute");i.appendChild(a);var l=g("00"),o=d(e+"-second");o.appendChild(g(":")),o.appendChild(l);var r=d(e+" BottomPanel-content");r.appendChild(t),r.appendChild(g(":")),r.appendChild(i),r.appendChild(o);var h=d(e+"-label");h.appendChild(g("CLOCK"));var p=h.classList,c=d("BottomPanel");c.appendChild(h),c.appendChild(r);var u,s=c.classList;return{element:c,highlight:function(){clearTimeout(u),s.add("highlight"),p.add("highlight"),u=setTimeout(function(){s.remove("highlight"),p.remove("highlight")},200)},update:function(){var e=new Date;n.nodeValue=P(e.getHours()),a.nodeValue=P(e.getMinutes()),l.nodeValue=P(e.getSeconds())}}}function a(e){var n=d("Tab ClockTab Button");n.appendChild(g("CLOCK"));var t=n.classList,a=p(n,function(){e(),t.add("selected")});return a.enable(),{element:n,deselect:function(){t.remove("selected")}}}function i(){var e=null,n=0;return{add:function(t){e&&(n+=l(e,t)),e=t},get:function(){return n},reset:function(){e=null,n=0},start:function(){e=null}}}function l(e,n){function t(e){return e*Math.PI/180}var a=e.coords,i=n.coords,l=t(a.latitude),d=t(a.longitude),o=t(i.latitude),r=t(i.longitude),h=6371e3,p=o-l,c=r-d,u=Math.sin(p/2),s=Math.sin(c/2),f=u*u+Math.cos(l)*Math.cos(o)*s*s,m=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),C=h*m;return C}function d(e){var n=document.createElement("div");return n.className=e,n}function o(){function n(){l(function(){setTimeout(function(){S.update(),M.update(),P.update(),L.update(),n()},50)})}function a(e){h&&p.add(e);var n=e.coords,t=n.speed;s.setSpeed(t),h&&E.setSpeed(t);var a=n.accuracy;w.setStatus(6>a?"SIGNAL GOOD":12>a?"SIGNAL OK":"SIGNAL WEAK")}var l=window.requestAnimationFrame,o=window.cancelAnimationFrame;l||(l=window.mozRequestAnimationFrame,o=window.mozCancelAnimationFrame);var h=!1,p=i(),s=f(),g=v(function(){B.removeChild(B.firstChild),B.appendChild(M.element),M.highlight()},function(){B.removeChild(B.firstChild),B.appendChild(S.element),S.highlight()},function(){B.removeChild(B.firstChild),B.appendChild(P.element),P.highlight()},function(){B.removeChild(B.firstChild),B.appendChild(E.element),E.highlight()},function(){B.removeChild(B.firstChild),B.appendChild(L.element),L.highlight()},function(){B.removeChild(B.firstChild),B.appendChild(I.element),I.highlight()}),M=b(),S=T(p),P=t(),E=r(),L=e(p,M),I=u(),A="MainPanel",B=d(A+"-panel");B.appendChild(S.element);var V=c(function(){p.reset(),M.reset(),S.reset(),E.reset(),L.reset()}),D=m(function(){h=!0,M.start(),p.start()},function(){h=!1,M.stop()}),w=C(),N=d(A+"-content");N.appendChild(s.element),N.appendChild(B),N.appendChild(g.element),N.appendChild(V),N.appendChild(D.element),N.appendChild(w.element);var F=d(A);return F.appendChild(N),navigator.geolocation.watchPosition(a,function(e){var n=e.code;w.setStatus(n==e.PERMISSION_DENIED?"PERMISSION DENIED":n==e.POSITION_UNAVAILABLE?"POSITION UNAVAILABLE":"TIMEOUT")},{enableHighAccuracy:!0}),n(),navigator.requestWakeLock&&navigator.requestWakeLock("screen"),{element:F,resize:function(e,n){var t=e/320;452*t>n&&(t=n/452),F.style.transform="scale("+t+")"}}}function r(){function e(e){f=e,e=18*e/5,e=Math.min(999.99,e),t.nodeValue=String(Math.floor(e)),i.nodeValue=Math.floor(e%1*10)}var n="MaxSpeedPanel",t=g("0"),a=d(n+"-integerPart");a.appendChild(t);var i=g("0"),l=d(n+"-fractionalPart");l.appendChild(g(".")),l.appendChild(i);var o=d(n+"-unit");o.appendChild(g("KM/H"));var r=d(n+" BottomPanel-content");r.appendChild(a),r.appendChild(l),r.appendChild(o);var h=d(n+"-label");h.appendChild(g("MAX SPEED"));var p=h.classList,c=d("BottomPanel");c.appendChild(h),c.appendChild(r);var u,s=c.classList,f=0;return{element:c,highlight:function(){clearTimeout(u),s.add("highlight"),p.add("highlight"),u=setTimeout(function(){s.remove("highlight"),p.remove("highlight")},200)},reset:function(){e(0)},setSpeed:function(n){isFinite(n)||(n=0),n>f&&e(n)}}}function h(e){var n="MaxSpeedTab",t=d(n+"-content Tab-content");t.appendChild(g("MAX")),t.appendChild(document.createElement("br")),t.appendChild(g("SPEED"));var a=d(n+" Tab Button");a.appendChild(d(n+"-aligner Tab-aligner")),a.appendChild(t);var i=a.classList,l=p(a,function(){e(),i.add("selected")});return l.enable(),{element:a,deselect:function(){i.remove("selected")}}}function p(e,n){function t(){d.add("active"),clearTimeout(l),l=setTimeout(function(){n(),l=setTimeout(function(){d.remove("active")},150)},100)}function a(e){0===e.button&&(e.preventDefault(),o?o=!1:t())}function i(e){e.preventDefault(),o=!0,t()}var l,d=e.classList,o=!1;return{disable:function(){e.removeEventListener("touchstart",i),e.removeEventListener("mousedown",a)},enable:function(){e.addEventListener("mousedown",a),e.addEventListener("touchstart",i)}}}function c(e){var n=d("ResetButton Button");n.appendChild(g("RESET"));var t=p(n,e);return t.enable(),n}function u(){var e="SettingsPanel",n=d(e+" BottomPanel-content"),t=d(e+"-label");t.appendChild(g("SETTINGS"));var a=t.classList,i=d("BottomPanel");i.appendChild(t),i.appendChild(n);var l,o=i.classList;return{element:i,highlight:function(){clearTimeout(l),o.add("highlight"),a.add("highlight"),l=setTimeout(function(){o.remove("highlight"),a.remove("highlight")},200)}}}function s(e){var n=d("Tab SettingsTab Button");n.appendChild(g("SETTINGS"));var t=n.classList,a=p(n,function(){e(),t.add("selected")});return a.enable(),{element:n,deselect:function(){t.remove("selected")}}}function f(){var e="SpeedLabel",n=g("0"),t=d(e+"-integerPart");t.appendChild(n);var a=g("0"),i=d(e+"-fractionalPart");i.appendChild(g(".")),i.appendChild(a);var l=d(e+"-unit");l.appendChild(g("KM/H"));var o=d(e+"-label");o.appendChild(g("SPEED"));var r=d(e+"-content");r.appendChild(t),r.appendChild(i),r.appendChild(l);var h=d(e);return h.appendChild(o),h.appendChild(r),{element:h,setSpeed:function(e){isFinite(e)||(e=0),e=18*e/5,e=Math.min(999.99,e),n.nodeValue=Math.floor(e),a.nodeValue=Math.floor(e%1*10)}}}function m(e,n){var t=!1,a=g("START"),i=d("StartStopButton Button");i.appendChild(a);var l=p(i,function(){t?(t=!1,a.nodeValue="START",n()):(t=!0,a.nodeValue="STOP",e())});return l.enable(),{element:i}}function C(){var e=g("INITIALIZING"),n=d("StatusPanel");n.appendChild(g("GPS: ")),n.appendChild(e);var t,a=n.classList;return{element:n,setStatus:function(n){n!=e.nodeValue&&(e.nodeValue=n,clearTimeout(t),a.add("highlight"),t=setTimeout(function(){a.remove("highlight")},200))}}}function v(e,t,i,l,o,r){var p=M(function(){c.deselect(),u.deselect(),f.deselect(),m.deselect(),C.deselect(),t()}),c=S(function(){p.deselect(),u.deselect(),f.deselect(),m.deselect(),C.deselect(),e()}),u=a(function(){p.deselect(),c.deselect(),f.deselect(),m.deselect(),C.deselect(),i()}),f=h(function(){p.deselect(),c.deselect(),u.deselect(),m.deselect(),C.deselect(),l()}),m=n(function(){p.deselect(),c.deselect(),u.deselect(),f.deselect(),C.deselect(),o()}),C=s(function(){p.deselect(),c.deselect(),u.deselect(),f.deselect(),m.deselect(),r()}),v="Tabs",g=d(v+"-row1");g.appendChild(p.element),g.appendChild(c.element),g.appendChild(u.element);var T=d(v+"-row2");T.appendChild(f.element),T.appendChild(m.element),T.appendChild(C.element);var b=d(v);return b.appendChild(g),b.appendChild(T),{element:b}}function g(e){return document.createTextNode(e)}function T(e){function n(){var n=e.get();n=Math.min(999999,Math.floor(n));var t=String(n%1e3);1==t.length?t="00"+t:2==t.length&&(t="0"+t),l.nodeValue=t,a.nodeValue=Math.floor(n/1e3)}var t="TripDistancePanel",a=g("0"),i=d(t+"-integerPart");i.appendChild(a);var l=g("000"),o=d(t+"-fractionalPart");o.appendChild(g(".")),o.appendChild(l);var r=d(t+"-unit");r.appendChild(g("KM"));var h=d(t+" BottomPanel-content");h.appendChild(i),h.appendChild(o),h.appendChild(r);var p=d(t+"-label");p.appendChild(g("TRIP DISTANCE"));var c=p.classList,u=d("BottomPanel");u.appendChild(p),u.appendChild(h);var s,f=u.classList;return{element:u,reset:n,update:n,highlight:function(){clearTimeout(s),f.add("highlight"),c.add("highlight"),s=setTimeout(function(){f.remove("highlight"),c.remove("highlight")},200)}}}function M(e){var n="TripDistanceTab",t=d(n+"-content Tab-content");t.appendChild(g("TRIP")),t.appendChild(document.createElement("br")),t.appendChild(g("DISTANCE"));var a=d(n+" Tab Button");a.appendChild(d(n+"-aligner Tab-aligner")),a.appendChild(t);var i=a.classList;i.add("selected");var l=p(a,function(){e(),i.add("selected")});return l.enable(),{element:a,deselect:function(){i.remove("selected")}}}function b(){var e="TripTimePanel",n=g("00"),t=d(e+"-hour");t.appendChild(n);var a=g("00"),i=d(e+"-minute");i.appendChild(a);var l=g("00"),o=d(e+"-second");o.appendChild(g(":")),o.appendChild(l);var r=d(e+" BottomPanel-content");r.appendChild(t),r.appendChild(g(":")),r.appendChild(i),r.appendChild(o);var h=d(e+"-label");h.appendChild(g("TRIP TIME"));var p=h.classList,c=d("BottomPanel");c.appendChild(h),c.appendChild(r);var u,s=c.classList,f=0,m=null,C=359999e3;return{element:c,getTripTime:function(){return f},highlight:function(){clearTimeout(u),s.add("highlight"),p.add("highlight"),u=setTimeout(function(){s.remove("highlight"),p.remove("highlight")},200)},reset:function(){f=0,null!==m&&(m=Date.now())},start:function(){m=Date.now()},stop:function(){f+=Date.now()-m,f=Math.min(f,C),m=null},update:function(){if(null!==m){var e=Date.now();f+=e-m,m=e}f=Math.min(f,C);var t=f/1e3;l.nodeValue=P(Math.floor(t%60));var i=t/60;a.nodeValue=P(Math.floor(i%60));var d=i/60;n.nodeValue=P(Math.floor(d))}}}function S(e){var n="TripTimeTab",t=d(n+"-content Tab-content");t.appendChild(g("TRIP")),t.appendChild(document.createElement("br")),t.appendChild(g("TIME"));var a=d(n+" Tab Button");a.appendChild(d(n+"-aligner Tab-aligner")),a.appendChild(t);var i=a.classList,l=p(a,function(){e(),i.add("selected")});return l.enable(),{element:a,deselect:function(){i.remove("selected")}}}function P(e){return e=String(e),1==e.length&&(e="0"+e),e}!function(){function e(){n.resize(innerWidth,innerHeight)}!function(){var e=document.createElement("style");e.innerHTML='@font-face {font-family: FreeMono;src: url(fonts/FreeMono.ttf);src: local("FreeMono"), url(fonts/FreeMono.ttf);font-weight: normal;}@font-face {font-family: FreeMono;src: url(fonts/FreeMonoBold.ttf);src: local("FreeMono Bold"), url(fonts/FreeMonoBold.ttf);font-weight: bold;}',document.head.appendChild(e)}();var n=o();document.body.appendChild(n.element),addEventListener("resize",e),e()}()}();