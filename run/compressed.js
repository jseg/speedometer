!function(){function e(e,n,i,a){function l(){var t,n;if(null===P)n="···",t="·";else{var i=h(P,e);n=i.fractionalPart,t=i.integerPart}r.nodeValue=t,s.nodeValue=n}var o="AltitudePanel",r=y("0"),d=u(o+"-integerPart");d.appendChild(r);var s=y("000"),c=u(o+"-fractionalPart");c.appendChild(y(".")),c.appendChild(s);var p=y(e.distanceLabel),f=u(o+"-unit");f.appendChild(p);var m=f.classList,v=u("BottomPanel-label");v.appendChild(y("ALTITUDE"));var T=v.classList,g=t(e,n,i),C=u("BottomPanel");C.appendChild(v),C.appendChild(d),C.appendChild(c),C.appendChild(f),C.appendChild(g.element);var L,b=C.classList,P=null,M=[],S="highlight";return{element:C,reset:g.reset,start:g.start,stop:g.stop,enableTransition:function(){a(b),a(T)},highlight:function(){b.add(S),T.add(S),clearTimeout(L),L=setTimeout(function(){b.remove(S),T.remove(S)},200)},setAltitude:function(e){if("number"==typeof e&&isFinite(e)){M.push(e),M.length>3&&M.shift();var t=0;M.forEach(function(e){t+=e}),t/=M.length,P=t}else P=null,M.splice(0);g.setAltitude(P),l()},setDarkTheme:function(){n(b),n(T),n(m),g.setDarkTheme()},setLightTheme:function(){i(b),i(T),i(m),g.setLightTheme()},setUnit:function(t){e=t,p.nodeValue=e.distanceLabel,l(),g.setUnit(e)}}}function t(e,t,n){function i(t,n){var i=h(n,e);t.setValue(i.integerPart,i.fractionalPart)}function a(){null!==c&&(null===p?p=f=c:(p=Math.min(p,c),f=Math.max(f,c)),i(o,p),i(r,f))}var l="AltitudeStatPanel",o=B("MIN",t,n),r=B("MAX",t,n),d=u(l);d.appendChild(o.element),d.appendChild(r.element);var s=!1,c=null,p=null,f=null;return{element:d,reset:function(){p=f=null,o.reset(),r.reset(),s&&a()},setAltitude:function(e){c=e,s&&a()},setDarkTheme:function(){o.setDarkTheme(),r.setDarkTheme()},setLightTheme:function(){o.setLightTheme(),r.setLightTheme()},setUnit:function(t){e=t,s&&a()},start:function(){s=!0,a()},stop:function(){s=!1}}}function n(e,t,n,i){return L("ALTITUDE","AltitudeTab",e,t,n,i)}function i(e){var t={latitude:0,longitude:0};return e.forEach(function(e){t.latitude+=e.coords.latitude,t.longitude+=e.coords.longitude}),t.latitude/=e.length,t.longitude/=e.length,{coords:t}}function a(e,t,n,i,a,l){function o(){var i,a=t.getTripTime();i=0==a?0:e.get()/(a/1e3),i=n.fix(18*i/5),i=Math.min(999.99,i),d.nodeValue=Math.floor(i),h.nodeValue=Math.floor(i%1*10)}var r="SpeedPanel",d=y("0"),s=u(r+"-integerPart");s.appendChild(d);var h=y("0"),c=u(r+"-fractionalPart");c.appendChild(y(".")),c.appendChild(h);var p=y(n.speedLabel),f=u(r+"-unit");f.appendChild(p);var m=f.classList,v=u("BottomPanel-label");v.appendChild(y("AVERAGE SPEED"));var T=v.classList,g=u("BottomPanel");g.appendChild(v),g.appendChild(s),g.appendChild(c),g.appendChild(f);var C,L=g.classList,b="highlight";return{element:g,reset:o,update:o,enableTransition:function(){l(L),l(T)},highlight:function(){L.add(b),T.add(b),clearTimeout(C),C=setTimeout(function(){L.remove(b),T.remove(b)},200)},setDarkTheme:function(){i(L),i(T),i(m)},setLightTheme:function(){a(L),a(T),a(m)},setUnit:function(e){n=e,p.nodeValue=n.speedLabel,o()}}}function l(e,t,n,i){return G("AVERAGE","SPEED","AverageSpeedTab",e,t,n,i)}function o(e,t,n){var i="ClockPanel",a=y("00"),l=y("00"),o=y("00"),r=u(i+"-second");r.appendChild(y(":")),r.appendChild(o);var d=u(i+"-content BottomPanel-content");d.appendChild(a),d.appendChild(y(":")),d.appendChild(l),d.appendChild(r);var s=u("BottomPanel-label");s.appendChild(y("CLOCK"));var h=s.classList,c=u(i+" BottomPanel");c.appendChild(s),c.appendChild(d);var p,f=c.classList,m="highlight";return{element:c,enableTransition:function(){n(f),n(h)},highlight:function(){f.add(m),h.add(m),clearTimeout(p),p=setTimeout(function(){f.remove(m),h.remove(m)},200)},setDarkTheme:function(){e(f),e(h)},setLightTheme:function(){t(f),t(h)},update:function(){var e=new Date;a.nodeValue=F(e.getHours()),l.nodeValue=F(e.getMinutes()),o.nodeValue=F(e.getSeconds())}}}function r(e,t,n,i){return L("CLOCK","ClockTab",e,t,n,i)}function d(){function e(){var e;if(e=null===u?0:u*Math.PI/180,s.clearRect(0,0,r,r),s.save(),s.translate(d,d),s.rotate(-e),null!==u){var o=.01*r;s.save(),s.lineWidth=o,s.beginPath(),s.moveTo(0,0),s.rotate(-Math.PI/2),s.arc(0,0,d-o,0,e),s.closePath(),s.fillStyle=l,s.fill(),s.lineJoin="round",s.strokeStyle=a,s.stroke(),s.restore()}s.save();for(var h=0;60>h;h++){if(s.beginPath(),h%5||null===u){var o=.01*r;s.lineWidth=o,s.moveTo(0,.98*d),s.lineTo(0,.95*d),s.strokeStyle=i}else s.lineWidth=.03*r,s.moveTo(0,.98*d),s.lineTo(0,.92*d),s.strokeStyle=n;s.stroke(),s.rotate(Math.PI/30)}if(s.restore(),null!==u){var c=.92*-d;s.save(),s.font="bold "+.25*r+"px FreeMono, monospace",s.textAlign="center",s.textBaseline="top",s.fillStyle="#f00",s.fillText("N",0,c),s.fillStyle=t,s.rotate(Math.PI/2),s.fillText("E",0,c),s.rotate(Math.PI/2),s.fillText("S",0,c),s.rotate(Math.PI/2),s.fillText("W",0,c),s.restore()}s.save(),s.rotate(e),s.beginPath(),s.lineJoin="round",s.lineWidth=.05*d,s.moveTo(0,.3*d),s.lineTo(0,.3*-d),s.moveTo(.15*-d,.15*-d),s.lineTo(0,.3*-d),s.lineTo(.15*d,.15*-d),s.strokeStyle=n,s.stroke(),s.restore(),s.restore()}var t,n,i,a,l,o=document.createElement("canvas");o.className="CompassPanel";var r,d,s=o.getContext("2d"),u=null;return{element:o,resize:function(t){r=116*t*devicePixelRatio,d=r/2,o.width=o.height=r,e()},setDarkTheme:function(){a="#999",l="#444",t="#999",n="#fff",i="#999",e()},setHeading:function(t){u=t,e()},setLightTheme:function(){a="#666",l="#bbb",t="#666",n="#000",i="#666",e()}}}function s(e,t){function n(e){return e*Math.PI/180}var i=e.coords,a=t.coords,l=n(i.latitude),o=n(i.longitude),r=n(a.latitude),d=n(a.longitude),s=6371e3,u=r-l,h=d-o,c=Math.sin(u/2),p=Math.sin(h/2),f=c*c+Math.cos(l)*Math.cos(r)*p*p,m=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),v=s*m;return v}function u(e){var t=document.createElement("div");return t.className=e,t}function h(e,t){var n=Math.floor(t.fix(e));n=Math.min(999999,Math.max(-99999,n));var i=String(Math.abs(n)%1e3);return 1==i.length?i="00"+i:2==i.length&&(i="0"+i),integerPart=Math.floor(Math.abs(n)/1e3),0>n&&(integerPart="-"+integerPart),{fractionalPart:i,integerPart:integerPart}}function c(e,t,n){function i(){var e;e=null===g?"·":Math.round(g),r.nodeValue=e}var a="HeadingPanel",l=u(a+"-unit");l.appendChild(y("°"));var o=l.classList,r=y("·"),s=u(a+"-value");s.appendChild(r),s.appendChild(l);var h=u("BottomPanel-label");h.appendChild(y("HEADING"));var c=h.classList,p=d(),f=u("BottomPanel");f.appendChild(h),f.appendChild(s),f.appendChild(p.element);var m,v=f.classList,T="highlight",g=null,C=null,L=[];return{element:f,resize:p.resize,enableTransition:function(){n(v),n(c)},highlight:function(){v.add(T),c.add(T),clearTimeout(m),m=setTimeout(function(){v.remove(T),c.remove(T)},200)},setDarkTheme:function(){e(v),e(c),e(o),p.setDarkTheme()},setHeading:function(e){if("number"==typeof e&&isFinite(e)){null!=C&&(e-C>180?e-=360:-180>e-C&&(e+=360)),C=e,L.push(e),L.length>3&&L.shift();var t=0;L.forEach(function(e){t+=e}),t/=L.length,g=(t%360+360)%360}else g=null,C=null,L.splice(0);p.setHeading(g),i()},setLightTheme:function(){t(v),t(c),t(o),p.setLightTheme()}}}function p(e,t,n,i){return L("HEADING","HeadingTab",e,t,n,i)}function f(){return{key:"imperial",distanceLabel:"MI",speedLabel:"MI/H",fix:function(e){return e/1.609344}}}function m(t){function n(){O.setDarkTheme(),G.setDarkTheme(),q.setDarkTheme(),X.setDarkTheme(),W.setDarkTheme(),z.setDarkTheme(),K.setDarkTheme(),_.setDarkTheme(),ee.setDarkTheme(),U.setDarkTheme(),F.setDarkTheme(),i(ie),J.theme="dark",J.save()}function i(e){e.remove(b),e.add(L)}function l(){m(y)}function r(){O.setLightTheme(),G.setLightTheme(),q.setLightTheme(),X.setLightTheme(),W.setLightTheme(),z.setLightTheme(),K.setLightTheme(),_.setLightTheme(),ee.setLightTheme(),U.setLightTheme(),F.setLightTheme(),d(ie),J.theme="light",J.save()}function d(e){e.remove(L),e.add(b)}function s(){m(R)}function h(e){Y.removeChild(Y.firstChild),Y.appendChild(e.element),e.highlight()}function p(e){U.setSpeed(e),D&&q.setSpeed(U.getSpeed())}function m(e){U.setUnit(e),O.setUnit(e),q.setUnit(e),X.setUnit(e),W.setUnit(e),J.unit=e.key,J.save()}function T(){var e=Date.now();P(function(){G.update(),K.update(),X.update(),setTimeout(T,Math.max(0,e+1e3-Date.now()))})}function C(e){D&&(B.add(e),O.update());var t=e.coords;p(t.speed);var n=t.accuracy;8>n?ee.setStatus("SIGNAL GOOD"):16>n?ee.setStatus("SIGNAL OK"):ee.setStatus("SIGNAL WEAK"),ae(t.altitude),le(t.heading),ee.hideError()}var L="darkTheme",b="lightTheme",P=window.requestAnimationFrame;P||(P=window.mozRequestAnimationFrame);var D=!1,B=x(),y=f(),R=g(),U=k(R,i,d,t),F=V(function(){h(G)},function(){h(O)},function(){h(K)},function(){h(q)},function(){h(X)},function(){h(_)},function(){h(W)},function(){h(z)},i,d,t),G=w(i,d,t),O=N(B,R,i,d,t),W=e(R,i,d,t),z=c(i,d,t),K=o(i,d,t),q=v(R,i,d,t),X=a(B,G,R,i,d,t),J=S(),_=E(J,n,r,l,s,i,d,t),Q="MainPanel",Y=u(Q+"-panel");Y.appendChild(O.element);var j=M(function(){B.reset(),O.update(),G.reset(),q.reset(),X.reset(),W.reset(),$.reset()},t),Z=H(),$=I(function(){D=!0,G.start(),B.start(),W.start(),Z.lock()},function(){D=!1,G.stop(),W.stop(),Z.unlock()},t),ee=A(i,d,t),te=u(Q+"-content");te.appendChild(U.element),te.appendChild(Y),te.appendChild(ee.element),te.appendChild(F.element),te.appendChild(j.element),te.appendChild($.element);var ne=u(Q);ne.appendChild(te);var ie=document.body.classList,ae=W.setAltitude,le=z.setHeading;return"light"==J.theme?r():n(),"imperial"==J.unit?l():s(),navigator.geolocation.watchPosition(C,function(e){var t=e.code;t==e.PERMISSION_DENIED?ee.setStatus("PERMISSION DENIED"):t==e.POSITION_UNAVAILABLE?ee.setStatus("POSITION UNAVAILABLE"):ee.setStatus("TIMEOUT, RETRYING"),p(null),ae(null),le(null),ee.showError()},{enableHighAccuracy:!0,maximumAge:3e4,timeout:3e4}),T(),{element:ne,enableTransition:function(){ee.enableTransition(),U.enableTransition(),j.enableTransition(),$.enableTransition(),F.enableTransition(),O.enableTransition(),G.enableTransition(),q.enableTransition(),X.enableTransition(),W.enableTransition(),z.enableTransition(),K.enableTransition(),_.enableTransition()},resize:function(e,t){var n=320,i=480;if(e>t){var a=n;n=i,i=a}te.style.width=n+"px",te.style.height=i+"px",te.style.top=-i/2+"px",te.style.left=-n/2+"px";var l=e/n;l*i>t&&(l=t/i),ne.style.transform="scale("+l+")",z.resize(l)}}}function v(e,t,n,i){function a(e){L=e,l()}function l(){var t=e.fix(18*L/5);t=Math.min(999.99,t),r.nodeValue=Math.floor(t),s.nodeValue=Math.floor(t%1*10)}var o="SpeedPanel",r=y("0"),d=u(o+"-integerPart");d.appendChild(r);var s=y("0"),h=u(o+"-fractionalPart");h.appendChild(y(".")),h.appendChild(s);var c=y(e.speedLabel),p=u(o+"-unit");p.appendChild(c);var f=p.classList,m=u("BottomPanel-label");m.appendChild(y("MAX SPEED"));var v=m.classList,T=u("BottomPanel");T.appendChild(m),T.appendChild(d),T.appendChild(h),T.appendChild(p);var g,C=T.classList,L=0,b="highlight";return{element:T,enableTransition:function(){i(C),i(v)},highlight:function(){C.add(b),v.add(b),clearTimeout(g),g=setTimeout(function(){C.remove(b),v.remove(b)},200)},reset:function(){a(0)},setDarkTheme:function(){t(C),t(v),t(f)},setLightTheme:function(){n(C),n(v),n(f)},setSpeed:function(e){isFinite(e)||(e=0),e>L&&a(e)},setUnit:function(t){e=t,c.nodeValue=e.speedLabel,l()}}}function T(e,t,n,i){return G("MAX","SPEED","MaxSpeedTab",e,t,n,i)}function g(){return{key:"metric",distanceLabel:"KM",speedLabel:"KM/H",fix:function(e){return e}}}function C(e,t){function n(){a.add("active"),clearTimeout(i),i=setTimeout(function(){t(),i=setTimeout(function(){a.remove("active")},150)},100)}var i,a=e.classList,l=!1;e.addEventListener("mousedown",function(e){0===e.button&&(e.preventDefault(),l?l=!1:n())}),e.addEventListener("touchstart",function(e){e.preventDefault(),l=!0,n()})}function L(e,t,n,i,a,l){var o=u("Tab-highlight");o.appendChild(y(e));var r=o.classList,d=u("Button-content");d.appendChild(o),C(d,n);var s=d.classList,h=u(t+" OneLineTab Tab Button");h.appendChild(d);var c,p=h.classList,f=!1,m="selected",v="highlight";return{element:h,deselect:function(){f=!1,s.remove(m),r.remove(m)},enableTransition:function(){l(p),l(r)},highlight:function(){r.add(v),clearTimeout(c),c=setTimeout(function(){r.remove(v)},200)},select:function(){f=!0,s.add(m),r.add(m)},setDarkTheme:function(){i(p),i(s),i(r)},setLightTheme:function(){a(p),a(s),a(r)}}}function b(e,t,n,i){return L("PAGE 1","Page1Tab",e,t,n,i)}function P(e,t,n,i){return L("PAGE 2","Page2Tab",e,t,n,i)}function M(e,t){var n="ResetButton",i=u(n+"-content Button-content");i.appendChild(y("RESET")),C(i,e);var a=u(n+" Button");a.appendChild(i);var l=a.classList;return{element:a,enableTransition:function(){t(l)}}}function S(){var e,t;try{e=localStorage.theme,t=localStorage.unit}catch(n){}var i={theme:e,unit:t,save:function(){try{localStorage.theme=i.theme,localStorage.unit=i.unit}catch(e){}}};return i}function E(e,t,n,i,a,l,o,r){var d="SettingsPanel",s="selected",h=u("Button-content");h.appendChild(y("LIGHT")),C(h,function(){v.remove(s),c.add(s),n()});var c=h.classList,p=u(d+"-lightButton "+d+"-button Button");p.appendChild(h);var f=p.classList,m=u("Button-content");m.appendChild(y("DARK")),C(m,function(){c.remove(s),v.add(s),t()});var v=m.classList,T=u(d+"-darkButton "+d+"-button Button");T.appendChild(m);var g=T.classList,L=u("Button-content");L.appendChild(y("IMPERIAL")),C(L,function(){E.remove(s),b.add(s),i()});var b=L.classList,P=u(d+"-imperialButton "+d+"-button Button");P.appendChild(L);var M=P.classList,S=u("Button-content");S.appendChild(y("METRIC")),C(S,function(){b.remove(s),E.add(s),a()});var E=S.classList,D=u(d+"-metricButton "+d+"-button Button");D.appendChild(S);var k=D.classList;"imperial"==e.unit?b.add(s):E.add(s),"light"==e.theme?c.add(s):v.add(s);var I=u(d+"-fieldLabel units");I.appendChild(y("UNITS:"));var B=u(d+"-fieldLabel theme");B.appendChild(y("THEME:"));var A=u("BottomPanel-label");A.appendChild(y("SETTINGS"));var V=A.classList,x=u("BottomPanel");x.appendChild(A),x.appendChild(B),x.appendChild(p),x.appendChild(T),x.appendChild(I),x.appendChild(P),x.appendChild(D);var N,R=x.classList,w="highlight";return{element:x,enableTransition:function(){r(R),r(V),r(f),r(g),r(M),r(k),r(B.classList),r(I.classList)},highlight:function(){R.add(w),V.add(w),clearTimeout(N),N=setTimeout(function(){R.remove(w),V.remove(w)},200)},setDarkTheme:function(){l(R),l(V),l(f),l(c),l(g),l(v),l(M),l(b),l(k),l(E)},setLightTheme:function(){o(R),o(V),o(f),o(c),o(g),o(v),o(M),o(b),o(k),o(E)}}}function D(e,t,n,i){return L("SETTINGS","SettingsTab",e,t,n,i)}function k(e,t,n,i){function a(){var t,n,i;if(null===P)i="",t="·",n="·";else{var a=e.fix(18*P/5);a=Math.min(999.99,a),t=Math.floor(a),n=Math.floor(a%1*10),i=E?S?"":"↑":S?"↓":""}o.nodeValue=t,d.nodeValue=n,v.nodeValue=i}var l="SpeedLabel",o=y("·"),r=u(l+"-integerPart");r.appendChild(o);var d=y("·"),s=u(l+"-fractionalPart");s.appendChild(y(".")),s.appendChild(d);var h=y(e.speedLabel),c=u(l+"-unit");c.appendChild(h);var p=c.classList,f=u(l+"-label");f.appendChild(y("SPEED"));var m=f.classList,v=y("↕"),T=u(l+"-arrow");T.appendChild(v);var g=u(l);g.appendChild(f),g.appendChild(T),g.appendChild(r),g.appendChild(s),g.appendChild(c);var C,L,b=g.classList,P=null,M=null,S=!1,E=!1,D=.02,k=[];return{element:g,enableTransition:function(){i(b),i(m),i(r.classList),i(s.classList),i(p)},getSpeed:function(){return P},setDarkTheme:function(){t(b),t(m),t(p)},setLightTheme:function(){n(b),n(m),n(p)},setSpeed:function(e){if("number"==typeof e&&isFinite(e)){k.push(e),k.length>3&&k.shift();var t=0;k.forEach(function(e){t+=e}),t/=k.length,null!==M&&(t>M+D?(E=!0,clearTimeout(L),L=setTimeout(function(){E=!1,a()},2500)):M-D>t&&(S=!0,clearTimeout(C),C=setTimeout(function(){S=!1,a()},2500))),M=P,P=t}else P=null,M=null,k.splice(0),S=E=!1,clearTimeout(C),clearTimeout(L);a()},setUnit:function(t){e=t,h.nodeValue=e.speedLabel,a()}}}function I(e,t,n){var i="StartStopButton",a=!1,l=y("START"),o=u(i+"-content Button-content start");o.appendChild(l),C(o,function(){a?(a=!1,l.nodeValue="RESUME",r.remove("stop"),r.add("start"),t()):(a=!0,l.nodeValue="PAUSE",r.remove("start"),r.add("stop"),e())});var r=o.classList,d=u(i+" Button");d.appendChild(o);var s=d.classList;return{element:d,enableTransition:function(){n(s)},reset:function(){a||(l.nodeValue="START")}}}function B(e,t,n){var i="StatField",a=u(i+"-label");a.appendChild(y(e));var l=a.classList,o=y("·"),r=u(i+"-integerPart");r.appendChild(o);var d=y("·"),s=u(i+"-fractionalPart");s.appendChild(y(".")),s.appendChild(d);var h=u(i+"-value");h.appendChild(r),h.appendChild(s);var c=u(i);return c.appendChild(a),c.appendChild(h),{element:c,reset:function(){o.nodeValue=d.nodeValue="·"},setDarkTheme:function(){t(l)},setLightTheme:function(){n(l)},setValue:function(e,t){o.nodeValue=e,d.nodeValue=t}}}function A(e,t,n){function i(){h.add(f),clearTimeout(s),s=setTimeout(function(){h.remove(f)},200)}var a="StatusPanel",l=y("ACQUIRING"),o=u(a+"-value");o.appendChild(l);var r=o.classList,d=u(a);d.appendChild(y("GPS")),d.appendChild(o);var s,h=d.classList,c=!1,p="error",f="highlight";return{element:d,enableTransition:function(){n(h),n(r)},hideError:function(){c&&(c=!1,r.remove(p),i())},setDarkTheme:function(){e(h),e(r)},setLightTheme:function(){t(h),t(r)},setStatus:function(e){l.nodeValue=e},showError:function(){c||(c=!0,r.add(p),i())}}}function V(e,t,i,a,o,d,s,h,c,f,m){function v(e){y.forEach(function(t){e!=t&&t.deselect()}),e.select()}var g=1,C=R(function(){v(C),t()},c,f,m),L=U(function(){v(L),e()},c,f,m),M=T(function(){v(M),a()},c,f,m),S=l(function(){v(S),o()},c,f,m),E=n(function(){v(E),s()},c,f,m),k=p(function(){v(k),h()},c,f,m),I=r(function(){v(I),i()},c,f,m),B=D(function(){v(B),d()},c,f,m),A=b(function(){1!=g&&(g=1,V.deselect(),N.removeChild(E.element),N.removeChild(k.element),N.removeChild(B.element),N.removeChild(I.element),N.appendChild(C.element),N.appendChild(L.element),N.appendChild(M.element),N.appendChild(S.element)),C.highlight(),L.highlight(),M.highlight(),S.highlight()},c,f,m),V=P(function(){2!=g&&(g=2,A.deselect(),N.removeChild(C.element),N.removeChild(L.element),N.removeChild(M.element),N.removeChild(S.element),N.appendChild(E.element),N.appendChild(k.element),N.appendChild(B.element),N.appendChild(I.element)),E.highlight(),k.highlight(),B.highlight(),I.highlight()},c,f,m),y=[C,L,M,S,E,k,I,B],x="Tabs",N=u(x);return N.appendChild(C.element),N.appendChild(L.element),N.appendChild(M.element),N.appendChild(S.element),N.appendChild(A.element),N.appendChild(V.element),{element:N,enableTransition:function(){y.forEach(function(e){e.enableTransition()}),A.enableTransition(),V.enableTransition()},setDarkTheme:function(){y.forEach(function(e){e.setDarkTheme()}),A.setDarkTheme(),V.setDarkTheme()},setLightTheme:function(){y.forEach(function(e){e.setLightTheme()}),A.setLightTheme(),V.setLightTheme()}}}function y(e){return document.createTextNode(e)}function x(){var e=0,t=[];return{add:function(n){var a;if(t.length&&(a=i(t)),t.push(n),t.length>3&&t.shift(),a){var l=i(t);e+=s(a,l)}},get:function(){return e},reset:function(){t.splice(0),e=0},start:function(){t.splice(0)}}}function N(e,t,n,i,a){function l(){var n=t.fix(e.get());n=Math.min(999999,Math.floor(n));var i=String(n%1e3);1==i.length?i="00"+i:2==i.length&&(i="0"+i),s.nodeValue=i,r.nodeValue=Math.floor(n/1e3)}var o="TripDistancePanel",r=y("0"),d=u(o+"-integerPart");d.appendChild(r);var s=y("000"),h=u(o+"-fractionalPart");h.appendChild(y(".")),h.appendChild(s);var c=y(t.distanceLabel),p=u(o+"-unit");p.appendChild(c);var f=p.classList,m=u("BottomPanel-label");m.appendChild(y("TRIP DISTANCE"));var v=m.classList,T=u("BottomPanel");T.appendChild(m),T.appendChild(d),T.appendChild(h),T.appendChild(p);var g,C=T.classList,L="highlight";return{element:T,update:l,enableTransition:function(){a(C),a(v)},highlight:function(){C.add(L),v.add(L),clearTimeout(g),g=setTimeout(function(){C.remove(L),v.remove(L)},200)},setDarkTheme:function(){n(C),n(v),n(f)},setLightTheme:function(){i(C),i(v),i(f)},setUnit:function(e){t=e,c.nodeValue=t.distanceLabel,l()}}}function R(e,t,n,i){var a=G("TRIP","DISTANCE","TripDistanceTab",e,t,n,i);return a.select(),a}function w(e,t,n){var i="ClockPanel",a=y("00"),l=y("00"),o=y("00"),r=u(i+"-second");r.appendChild(y(":")),r.appendChild(o);var d=u("BottomPanel-label");d.appendChild(y("TRIP TIME"));var s=d.classList,h=u(i+"-content");h.appendChild(a),h.appendChild(y(":")),h.appendChild(l),h.appendChild(r);var c=u(i+" BottomPanel");c.appendChild(d),c.appendChild(h);var p,f=c.classList,m=0,v=null,T=359999e3,g="highlight";return{element:c,enableTransition:function(){n(f),n(s)},getTripTime:function(){return m},highlight:function(){f.add(g),s.add(g),clearTimeout(p),p=setTimeout(function(){f.remove(g),s.remove(g)},200)},reset:function(){m=0,null!==v&&(v=Date.now())},setDarkTheme:function(){e(f),e(s)},setLightTheme:function(){t(f),t(s)},start:function(){v=Date.now()},stop:function(){m+=Date.now()-v,m=Math.min(m,T),v=null},update:function(){if(null!==v){var e=Date.now();m+=e-v,v=e}m=Math.min(m,T);var t=m/1e3;o.nodeValue=F(Math.floor(t%60));var n=t/60;l.nodeValue=F(Math.floor(n%60));var i=n/60;a.nodeValue=F(Math.floor(i))}}}function U(e,t,n,i){return G("TRIP","TIME","TripTimeTab",e,t,n,i)}function F(e){return e=String(e),1==e.length&&(e="0"+e),e}function G(e,t,n,i,a,l,o){var r="TwoLineTab "+n,d=u(r+"-content Tab-content");d.appendChild(y(e)),d.appendChild(document.createElement("br")),d.appendChild(y(t));var s=u("Tab-highlight");s.appendChild(u(r+"-aligner Tab-aligner")),s.appendChild(d);var h=s.classList,c=u("Button-content");c.appendChild(s),C(c,i);var p=c.classList,f=u(r+" Tab Button");f.appendChild(c);var m,v=f.classList,T=!1,g="selected",L="highlight";return{element:f,deselect:function(){T=!1,p.remove(g),h.remove(g)},enableTransition:function(){o(v),o(h)},highlight:function(){h.add(L),clearTimeout(m),m=setTimeout(function(){h.remove(L)},200)},select:function(){T=!0,p.add(g),h.add(g)},setDarkTheme:function(){a(v),a(p),a(h)},setLightTheme:function(){l(v),l(p),l(h)}}}function H(){var e,t,n;return navigator.requestWakeLock?(e=function(){n=navigator.requestWakeLock("screen")},t=function(){n.unlock()}):e=t=function(){},{lock:e,unlock:t}}!function(){function e(e){e.add("enableTransition")}function t(){n.resize(innerWidth,innerHeight)}!function(){var e=document.createElement("style");e.innerHTML='@font-face {font-family: FreeMono;src: url(fonts/FreeMono.ttf);src: local("FreeMono"), url(fonts/FreeMono.ttf);font-weight: normal;}@font-face {font-family: FreeMono;src: url(fonts/FreeMonoBold.ttf);src: local("FreeMono Bold"), url(fonts/FreeMonoBold.ttf);font-weight: bold;}',document.head.appendChild(e)}();var n=m(e),i=document.body;i.appendChild(n.element),addEventListener("resize",t),t(),setTimeout(function(){e(i.classList),n.enableTransition()},200)}()}();